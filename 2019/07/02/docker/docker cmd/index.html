<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="姚杰的博客"><title>docker 基础命令 | 雨中风筝</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">docker 基础命令</h1><a id="logo" href="/.">雨中风筝</a><p class="description">雨，淅淅沥沥的下；风筝，摇曳穿梭</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">docker 基础命令</h1><div class="post-meta">Jul 2, 2019<span> | </span><span class="category"><a href="/categories/docker/">docker</a></span></div><div class="post-content"><p><strong>HELP 命令</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">version</span>:版本</span><br><span class="line">docker info：信息</span><br><span class="line">docker <span class="comment">--help：帮助</span></span><br></pre></td></tr></table></figure>
<p><strong>docker 基础</strong></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">docker images (-<span class="keyword">a</span>) (-q) (--digests) (--<span class="keyword">no</span>-<span class="built_in">trunc</span>)</span><br><span class="line">    -<span class="keyword">a</span> :列出本地所有的镜像（含中间映像层）</span><br><span class="line">    -q :只显示镜像ID。</span><br><span class="line">    --digests :显示镜像的摘要信息</span><br><span class="line">    --<span class="keyword">no</span>-<span class="built_in">trunc</span> :显示完整的镜像信息</span><br><span class="line">各个选项说明:</span><br><span class="line">    REPOSITORY：表示镜像的仓库源</span><br><span class="line">    TAG：镜像的标签</span><br><span class="line">    IMAGE ID：镜像ID</span><br><span class="line">    CREATED：镜像创建时间</span><br><span class="line">    SIZE：镜像大小</span><br><span class="line">    同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本，我们使用 REPOSITORY:TAG 来定义不同的镜像。</span><br><span class="line">    如果你不指定一个镜像的版本标签，例如你只使用 ubuntu，docker 将默认使用 ubuntu:latest 镜像</span><br><span class="line">    </span><br><span class="line">docker <span class="built_in">search</span> 某个XXX镜像名字 (--<span class="keyword">no</span>-<span class="built_in">trunc</span>) (-s) (--automated)</span><br><span class="line">    --<span class="keyword">no</span>-<span class="built_in">trunc</span> : 显示完整的镜像描述</span><br><span class="line">    -s : 列出收藏数不小于指定值的镜像。</span><br><span class="line">    --automated : 只列出 automated build类型的镜像；</span><br><span class="line">    网站 http<span class="variable">s:</span>//hub.docker.<span class="keyword">com</span></span><br><span class="line"></span><br><span class="line">docker rmi 某个XXX镜像名字ID  删除镜像</span><br><span class="line">    删除单个 docker rmi  -<span class="keyword">f</span> 镜像ID</span><br><span class="line">    删除多个 docker rmi -<span class="keyword">f</span> 镜像名<span class="number">1</span>:TAG 镜像名<span class="number">2</span>:TAG </span><br><span class="line">    删除全部 docker rmi -<span class="keyword">f</span> $(docker images -<span class="keyword">qa</span>)</span><br><span class="line"></span><br><span class="line"># 登陆http<span class="variable">s:</span>//hub.docker.<span class="keyword">com</span>查看版本</span><br><span class="line">docker pull 某个XXX镜像名字  下载镜像</span><br><span class="line">docker pull 镜像名字[:TAG]</span><br><span class="line"></span><br><span class="line">docker run --name=<span class="string">"容器新名字"</span> -d -<span class="keyword">p</span> <span class="number">8081</span>:<span class="number">8080</span> --privileged=true</span><br><span class="line"></span><br><span class="line">一次性删除多个容器</span><br><span class="line">    docker rm -<span class="keyword">f</span> $(docker <span class="keyword">ps</span> -<span class="keyword">a</span> -q)</span><br><span class="line">    docker <span class="keyword">ps</span> -<span class="keyword">a</span> -q | xargs docker rm</span><br><span class="line"></span><br><span class="line">查看容器日志</span><br><span class="line">  docker logs -<span class="keyword">f</span> -t --tail <span class="number">8</span> 容器ID</span><br><span class="line">    *   -t 是加入时间戳</span><br><span class="line">    *   -<span class="keyword">f</span> 跟随最新的日志打印</span><br><span class="line">    *   --tail 数字 显示最后多少条</span><br><span class="line"></span><br><span class="line">查看容器内运行的进程 docker top 容器ID</span><br><span class="line">查看容器内部细节 docker inspect 容器ID</span><br><span class="line">进入正在运行的容器并以命令行交互 docker exec -it 容器ID /bin/bash</span><br><span class="line">重新进入  docker attach 容器ID</span><br><span class="line">述两个区别</span><br><span class="line">      attach 直接进入容器启动命令的终端，不会启动新的进程</span><br><span class="line">      exec 是在容器中打开新的终端，并且可以启动新的进程</span><br><span class="line">从容器内拷贝文件到主机上 docker <span class="keyword">cp</span>  容器ID:容器内路径 目的主机路径</span><br></pre></td></tr></table></figure>
<p>命令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">attach    <span class="comment"># 当前 shell 下 attach 连接指定运行镜像</span></span><br><span class="line">build     <span class="comment"># 通过 Dockerfile 定制镜像</span></span><br><span class="line"><span class="keyword">commit</span>    <span class="comment"># 提交当前容器为新的镜像</span></span><br><span class="line">cp        <span class="comment">#从容器中拷贝指定文件或者目录到宿主机中</span></span><br><span class="line"><span class="keyword">create</span>    <span class="comment"># 创建一个新的容器，同 run，但不启动容器</span></span><br><span class="line">diff      <span class="comment"># 查看 docker 容器变化</span></span><br><span class="line"><span class="keyword">events</span>    <span class="comment"># 从 docker 服务获取容器实时事件</span></span><br><span class="line">exec      <span class="comment"># 在已存在的容器上运行命令</span></span><br><span class="line"><span class="keyword">export</span>    <span class="comment"># 导出容器的内容流作为一个 tar 归档文件[对应 import ]</span></span><br><span class="line">history   <span class="comment"># 展示一个镜像形成历史</span></span><br><span class="line">images    <span class="comment"># 列出系统当前镜像</span></span><br><span class="line"><span class="keyword">import</span>    <span class="comment"># 从tar包中的内容创建一个新的文件系统映像[对应export]</span></span><br><span class="line">info      <span class="comment"># 显示系统相关信息</span></span><br><span class="line">inspect   <span class="comment"># 查看容器详细信息</span></span><br><span class="line"><span class="keyword">kill</span>      <span class="comment"># kill 指定 docker 容器</span></span><br><span class="line"><span class="keyword">load</span>      <span class="comment"># 从一个 tar 包中加载一个镜像[对应 save]</span></span><br><span class="line">login     <span class="comment"># 注册或者登陆一个 docker 源服务器</span></span><br><span class="line">logout    <span class="comment"># 从当前 Docker registry 退出</span></span><br><span class="line"><span class="keyword">logs</span>      <span class="comment"># 输出当前容器日志信息</span></span><br><span class="line">port      <span class="comment"># 查看映射端口对应的容器内部源端口</span></span><br><span class="line">pause     <span class="comment"># 暂停容器</span></span><br><span class="line">ps        <span class="comment"># 列出容器列表</span></span><br><span class="line">pull      <span class="comment"># 从docker镜像源服务器拉取指定镜像或者库镜像</span></span><br><span class="line">push      <span class="comment"># 推送指定镜像或者库镜像至docker源服务器</span></span><br><span class="line">restart   <span class="comment"># 重启运行的容器</span></span><br><span class="line">rm        <span class="comment"># 移除一个或者多个容器</span></span><br><span class="line">rmi       <span class="comment"># 移除一个或多个镜像[无容器使用该镜像才可删除，否则需删除相关容器才可继续或 -f 强制删除]</span></span><br><span class="line">run       <span class="comment"># 创建一个新的容器并运行一个命令</span></span><br><span class="line"><span class="keyword">save</span>      <span class="comment"># 保存一个镜像为一个 tar 包[对应 load]</span></span><br><span class="line"><span class="keyword">search</span>    <span class="comment"># 在 docker hub 中搜索镜像</span></span><br><span class="line"><span class="keyword">start</span>     <span class="comment"># 启动容器</span></span><br><span class="line"><span class="keyword">stop</span>      <span class="comment"># 停止容器</span></span><br><span class="line">tag       <span class="comment"># 给源中镜像打标签</span></span><br><span class="line">top       <span class="comment"># 查看容器中运行的进程信息</span></span><br><span class="line">unpause   <span class="comment"># 取消暂停容器</span></span><br><span class="line"><span class="keyword">version</span>   <span class="comment"># 查看 docker 版本号</span></span><br><span class="line"><span class="keyword">wait</span>      <span class="comment"># 截取容器停止时的退出状态值</span></span><br></pre></td></tr></table></figure>
<p><strong>将容器生成镜像</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.  从Hub上下载tomcat镜像到本地并成功运行 docker run -it -<span class="selector-tag">p</span> <span class="number">8080</span>:<span class="number">8080</span> tomcat</span><br><span class="line">    -<span class="selector-tag">p</span> 主机端口:docker容器端口</span><br><span class="line">    -P 随机分配端口</span><br><span class="line">    <span class="selector-tag">i</span>:交互</span><br><span class="line">    t:终端</span><br><span class="line"><span class="number">2</span>.故意删除上一步镜像生产tomcat容器的文档</span><br><span class="line">docker ps </span><br><span class="line">docker exec -it <span class="number">346</span>a87913be9  /bin/bash</span><br><span class="line">cd /webapps</span><br><span class="line">ls -l</span><br><span class="line">rm -rf docs</span><br><span class="line"><span class="number">3</span>.也即当前的tomcat运行实例是一个没有文档内容的容器， 以它为模板commit一个没有doc的tomcat新镜像zhw/tomcat02</span><br><span class="line">docker commit -a=<span class="string">"zhw"</span> -m=<span class="string">"自定义镜像"</span> <span class="number">346</span>a87913be9 zhw/tomcat2:<span class="number">1.0</span></span><br><span class="line">启动我们的新镜像并和原来的对比</span><br><span class="line">  启动zhw/tomcat02，它没有docs</span><br><span class="line">  新启动原来的tomcat，它有docs</span><br></pre></td></tr></table></figure>
<p><strong>DockerFile添加镜像</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得一个新镜像jingxiang,/mydocker/dockerfile2是Dockerfile</span></span><br><span class="line">docker build -f /mydocker/dockerfile2 -t jingxiang . </span><br><span class="line"></span><br><span class="line"><span class="comment"># VOLUME 创建数据卷</span></span><br><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">"/dataVolumeContainer1"</span>,<span class="string">"/dataVolumeContainer2"</span>]</span></span><br><span class="line"><span class="bash">CMD <span class="built_in">echo</span> <span class="string">"finished,--------success1"</span></span></span><br><span class="line"><span class="bash">CMD /bin/bash</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">docker run -it --name dc01 jingxiang</span></span><br><span class="line"><span class="bash"><span class="comment"># 共享数据卷</span></span></span><br><span class="line"><span class="bash">docker run -it --name dc02 --volumes-from dc01  jingxiang</span></span><br></pre></td></tr></table></figure>
<p><strong>DockerFile格式</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    基础镜像，当前新镜像是基于哪个镜像的</span><br><span class="line"><span class="keyword">MAINTAINER</span></span><br><span class="line">    镜像维护者的姓名和邮箱地址</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"></span></span><br><span class="line"><span class="bash">    容器构建时需要运行的命令</span></span><br><span class="line"><span class="bash">EXPOSE</span></span><br><span class="line"><span class="bash">    当前容器对外暴露出的端口</span></span><br><span class="line"><span class="bash">WORKDIR</span></span><br><span class="line"><span class="bash">    指定在创建容器后，终端默认登陆的进来工作目录，一个落脚点</span></span><br><span class="line"><span class="bash">ENV</span></span><br><span class="line"><span class="bash">    用来在构建镜像过程中设置环境变量</span></span><br><span class="line"><span class="bash"> </span></span><br><span class="line"><span class="bash">    ENV MY_PATH /usr/mytest 这个环境变量可以在后续的任何RUN指令中使用，这就如同在命令前面指定了环境变量前缀一样；也可以在其它指令中直接使用这些环境变量，比如：WORKDIR <span class="variable">$MY_PATH</span></span></span><br><span class="line"><span class="bash">ADD</span></span><br><span class="line"><span class="bash">    将宿主机目录下的文件拷贝进镜像且ADD命令会自动处理URL和解压tar压缩包</span></span><br><span class="line"><span class="bash">COPY</span></span><br><span class="line"><span class="bash">    类似ADD，拷贝文件和目录到镜像中。 将从构建上下文目录中 &lt;源路径&gt; 的文件/目录复制到新的一层的镜像内的 &lt;目标路径&gt; 位置</span></span><br><span class="line"><span class="bash">VOLUME</span></span><br><span class="line"><span class="bash">    容器数据卷，用于数据保存和持久化工作</span></span><br><span class="line"><span class="bash">CMD</span></span><br><span class="line"><span class="bash">    指定一个容器启动时要运行的命令</span></span><br><span class="line"><span class="bash">    Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之后的参数替换</span></span><br><span class="line"><span class="bash">ENTRYPOINT </span></span><br><span class="line"><span class="bash">    指定一个容器启动时要运行的命令</span></span><br><span class="line"><span class="bash">    ENTRYPOINT 的目的和 CMD 一样，都是在指定容器启动程序及参数</span></span><br><span class="line"><span class="bash">ONBUILD</span></span><br><span class="line"><span class="bash">    当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发</span></span><br></pre></td></tr></table></figure>
<p><strong>自定义TOMCAT</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. mkdir -p /zhwfile/mydockerfile/tomcat9</span><br><span class="line"><span class="number">2</span>. 在上述目录下touch c.txt</span><br><span class="line"><span class="number">3</span>. 将jdk和tomcat安装的压缩包拷贝进上一步目录</span><br><span class="line">    apache-tomcat-<span class="number">9.0</span>.<span class="number">8</span>.tar.gz</span><br><span class="line">    jdk-<span class="number">8</span>u171-linux-x64.tar.gz</span><br><span class="line"><span class="number">4</span>.在/zhwfile/mydockerfile/tomcat9目录下新建Dockerfile文件</span><br><span class="line">目录内容:</span><br><span class="line"><span class="comment">#基础镜像，当前新镜像是基于哪个镜像的</span></span><br><span class="line"><span class="keyword">FROM</span>         centos </span><br><span class="line"><span class="comment">#镜像维护者的姓名和邮箱地址</span></span><br><span class="line"><span class="keyword">MAINTAINER</span>    zhw&lt;zhw731727335@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#把宿主机当前上下文的c.txt拷贝到容器/usr/local/路径下</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> c.txt /usr/<span class="built_in">local</span>/cincontainer.txt</span></span><br><span class="line"><span class="bash"><span class="comment">#把java与tomcat添加到容器中</span></span></span><br><span class="line"><span class="bash">ADD jdk-8u171-linux-x64.tar.gz /usr/<span class="built_in">local</span>/</span></span><br><span class="line"><span class="bash">ADD apache-tomcat-9.0.8.tar.gz /usr/<span class="built_in">local</span>/</span></span><br><span class="line"><span class="bash"><span class="comment">#安装vim编辑器</span></span></span><br><span class="line"><span class="bash">RUN yum -y install vim</span></span><br><span class="line"><span class="bash"><span class="comment">#设置工作访问时候的WORKDIR路径，登录落脚点</span></span></span><br><span class="line"><span class="bash">ENV MYPATH /usr/<span class="built_in">local</span></span></span><br><span class="line"><span class="bash">WORKDIR <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="bash"><span class="comment">#配置java与tomcat环境变量</span></span></span><br><span class="line"><span class="bash">ENV JAVA_HOME /usr/<span class="built_in">local</span>/jdk1.8.0_171</span></span><br><span class="line"><span class="bash">ENV CLASSPATH <span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar</span></span><br><span class="line"><span class="bash">ENV CATALINA_HOME /usr/<span class="built_in">local</span>/apache-tomcat-9.0.8</span></span><br><span class="line"><span class="bash">ENV CATALINA_BASE /usr/<span class="built_in">local</span>/apache-tomcat-9.0.8</span></span><br><span class="line"><span class="bash">ENV PATH <span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$CATALINA_HOME</span>/lib:<span class="variable">$CATALINA_HOME</span>/bin</span></span><br><span class="line"><span class="bash"><span class="comment">#容器运行时监听的端口</span></span></span><br><span class="line"><span class="bash">EXPOSE  8080</span></span><br><span class="line"><span class="bash"><span class="comment">#启动时运行tomcat</span></span></span><br><span class="line"><span class="bash"><span class="comment"># ENTRYPOINT ["/usr/local/apache-tomcat-9.0.8/bin/startup.sh" ]</span></span></span><br><span class="line"><span class="bash"><span class="comment"># CMD ["/usr/local/apache-tomcat-9.0.8/bin/catalina.sh","run"]</span></span></span><br><span class="line"><span class="bash">CMD /usr/<span class="built_in">local</span>/apache-tomcat-9.0.8/bin/startup.sh &amp;&amp; tail -F /usr/<span class="built_in">local</span>/apache-tomcat-9.0.8/bin/logs/catalina.out</span></span><br><span class="line"><span class="bash">5.在该目录下执行构建 docker build -t zhwTomcat</span></span><br><span class="line"><span class="bash">6.查看构建是否成功</span></span><br><span class="line"><span class="bash">docker images</span></span><br><span class="line"><span class="bash">7.运行：</span></span><br><span class="line"><span class="bash">docker run -d -p 9080:8080 --name myt9 -v /zhwfile/mydockerfile/tomcat9/<span class="built_in">test</span>:/usr/<span class="built_in">local</span>/apache-tomcat-9.0.8/webapps/<span class="built_in">test</span> -v /zhwfile/mydockerfile/tomcat9/tomcat9logs/:/usr/<span class="built_in">local</span>/apache-tomcat-9.0.8/logs --privileged=<span class="literal">true</span> zhwTomcat</span></span><br><span class="line"><span class="bash">8.验证是否成功：</span></span><br><span class="line"><span class="bash"> http://94.191.86.252:9080/</span></span><br><span class="line"><span class="bash">9.将项目放在/zhwfile/mydockerfile/tomcat9/<span class="built_in">test</span>下浏览器进行访问，查看是否成功。</span></span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/docker/">docker</a><a href="/tags/部署/">部署</a></div><div class="post-nav"><a class="pre" href="/2019/07/02/docker/docker-compose install tools/">docker-compose 安装工具</a><a class="next" href="/2019/07/02/docker/install docker/">docker/docker-compose安装</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springMvc/">springMvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springboot/">springboot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springcloud/">springcloud</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂记/">杂记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/部署/" style="font-size: 15px;">部署</a> <a href="/tags/es/" style="font-size: 15px;">es</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/定时任务/" style="font-size: 15px;">定时任务</a> <a href="/tags/工具类/" style="font-size: 15px;">工具类</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/07/02/docker/docker-compose install tools/">docker-compose 安装工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/02/docker/docker cmd/">docker 基础命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/02/docker/install docker/">docker/docker-compose安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/11/other/docker in out/">docker 简单操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/11/other/elastic search dump/">es 简单操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/29/other/linux operator/">linux常规操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/24/other/git operator/">git操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/26/springboot/sharding jdbc/">springboot2.0.6使用sharding jdbc3.0</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/23/springboot/tip-springboot tip/">springboot一些方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/08/docker/docker install tools/">docker安装工具</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">雨中风筝.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>